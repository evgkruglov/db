# –¢–æ–º–∞ –∏ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –≤ Kubernetes

## 1. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
### –ü—Ä–æ–±–ª–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–º–µ—é—Ç **—ç—Ñ–µ–º–µ—Ä–Ω—É—é —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É** (–¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ).
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **—Ç–æ–º–æ–≤** –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤–Ω–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

### –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
- **Volume** ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –∫ –ø–æ–¥—É (–∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –ø–æ–¥—É).
- **VolumeMount** ‚Äî —Ç–æ—á–∫–∞ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–º–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞).

---

## 2. –¢–∏–ø—ã —Ç–æ–º–æ–≤
### 2.1. –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ–º–∞ (—ç—Ñ–µ–º–µ—Ä–Ω—ã–µ)
#### `emptyDir`
```yaml
volumes:
  - name: temp-data
    emptyDir: 
      medium: Memory  # –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ RAM (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```
- **–î–ª—è —á–µ–≥–æ**: –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∫—ç—à, –±—É—Ñ–µ—Ä—ã).
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - –°–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø–æ–¥–∞, —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –µ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏.
  - –ú–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–∞ –¥–∏—Å–∫–µ —É–∑–ª–∞ –∏–ª–∏ –≤ –ø–∞–º—è—Ç–∏ (`medium: Memory`).

#### `gitRepo` (—É—Å—Ç–∞—Ä–µ–ª)
```yaml
volumes:
  - name: git-data
    gitRepo:
      repository: "https://github.com/user/repo.git"
```
- **–ü—Ä–æ–±–ª–µ–º—ã**: –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `InitContainer` + `git clone`).

---

### 2.2. –¢–æ–º–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ —É–∑–ª—É
#### `hostPath`
```yaml
volumes:
  - name: node-logs
    hostPath:
      path: /var/logs
      type: Directory
```
- **–î–ª—è —á–µ–≥–æ**: –î–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–∞–º —É–∑–ª–∞ (–ª–æ–≥–∏, –∫–æ–Ω—Ñ–∏–≥–∏).
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
  - –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —É–∑–ª—É.
  - –†–∏—Å–∫ —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ –ø–æ–¥–∞.
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –¢–æ–ª—å–∫–æ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `DaemonSet`).

---

### 2.3. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–æ–º–∞
- **`configMap`**, **`secret`**, **`downwardAPI`**:
```yaml
volumes:
  - name: app-config
    configMap:
      name: my-config
```
- **–î–ª—è —á–µ–≥–æ**: –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π, —Å–µ–∫—Ä–µ—Ç–æ–≤, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞.

---

## 3. –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ (PersistentVolume –∏ PersistentVolumeClaim)
### 3.1. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã PV/PVC?
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, NFS-—Å–µ—Ä–≤–µ—Ä—É).
- **–†–µ—à–µ–Ω–∏–µ**:
  - **PV** (PersistentVolume): –†–µ—Å—É—Ä—Å –∫–ª–∞—Å—Ç–µ—Ä–∞, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (—Å–æ–∑–¥–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä).
  - **PVC** (PersistentVolumeClaim): –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (—Å–æ–∑–¥–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫).

### 3.2. –ü—Ä–∏–º–µ—Ä PV (NFS)
```yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: pv-nfs
spec:
  capacity:
    storage: 10Gi
  accessModes:
    - ReadWriteMany
  nfs:
    server: nfs-server.local
    path: /data
```

### 3.3. –ü—Ä–∏–º–µ—Ä PVC
```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: my-pvc
spec:
  accessModes:
    - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi
```

### 3.4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PVC –≤ –ø–æ–¥–µ
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
    - name: app
      image: nginx
      volumeMounts:
        - name: data
          mountPath: /var/www/html
  volumes:
    - name: data
      persistentVolumeClaim:
        claimName: my-pvc
```

---

## 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º PV
### –ü–æ–ª–∏—Ç–∏–∫–∏ —Ä–µ–∫–ª–∞–º–∞—Ü–∏–∏ (Reclaim Policy)
```yaml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: pv-example
spec:
  persistentVolumeReclaimPolicy: Retain
  # ...
```
- **Retain**: PV —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏ (—Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏).
- **Delete**: PV –∏ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- **Recycle** (—É—Å—Ç–∞—Ä–µ–ª–æ): –î–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è, —Ç–æ–º —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

## 5. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (StorageClass)
### –ü—Ä–∏–º–µ—Ä StorageClass
```yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: fast-storage
provisioner: kubernetes.io/aws-ebs
parameters:
  type: gp3
```
- **–î–ª—è —á–µ–≥–æ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ PV –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ PVC.
- **–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å**: –£–∫–∞–∑–∞—Ç—å `storageClassName` –≤ PVC.

---

## 6. Best Practices
### –ß—Ç–æ –¥–µ–ª–∞—Ç—å:
- üõ°Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **PVC + StorageClass** –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è PV.
- üîÑ –î–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: Velero, Restic.
- üì¶ –î–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: `emptyDir` —Å `medium: Memory`.

### –ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å:
- ‚ùå `hostPath` –¥–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
- ‚ùå –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ NFS/GCE/Amazon –≤ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞—Ö –ø–æ–¥–æ–≤.

---

## 7. –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏
### –û—à–∏–±–∫–∞: PVC –≤ —Å—Ç–∞—Ç—É—Å–µ `Pending`
**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ StorageClass:
```bash
kubectl get storageclasses
```
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PV –¥–æ—Å—Ç—É–ø–µ–Ω:
```bash
kubectl describe pvc my-pvc
```

### –û—à–∏–±–∫–∞: –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ**:
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É–∫–∞–∑–∞–Ω `persistentVolumeReclaimPolicy` (–Ω–µ `Delete`).
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ `emptyDir` –≤–º–µ—Å—Ç–æ PVC.